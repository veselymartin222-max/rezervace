// 1. FUNKCE PRO UŽIVATELE (Chce jen ten 4-místný kód)
async function deleteByToken() {
    let token = prompt("Zadejte svůj 4-místný kód pro zrušení:");
    
    // Pokud uživatel klikne na Storno nebo nic nevyplní
    if (token === null || token.trim() === "") return;

    const res = await fetch('/delete-own', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({ token: token.trim() })
    });

    const result = await res.json();
    if (result.success) {
        alert("Vaše rezervace byla úspěšně zrušena.");
        loadReservations(); // Obnovit přehled
    } else {
        // Tady uvidíme tu chybu, o které jsme mluvili (např. kód nenalezen)
        alert(result.message);
    }
}

// 2. FUNKCE PRO ADMINA (Ta jediná má chtít heslo!)
async function adminDelete(id) {
    const adminPassword = prompt("Zadejte admin heslo pro smazání:");
    if (!adminPassword) return;

    const res = await fetch('/delete', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({ id, adminPassword })
    });

    const result = await res.json();
    if (result.success) {
        alert("Smazáno adminem.");
        loadReservations();
    } else {
        alert("Chyba: " + (result.message || "Špatné heslo"));
    }
}
